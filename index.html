<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>ì˜¤ëŠ˜ì˜ ë©”ë‰´ ì¶”ì²œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />

</head>

<body>
    <h1>ğŸ± ì˜¤ëŠ˜ì˜ ë©”ë‰´ ì¶”ì²œ</h1>


    <form id="menuAI">

    <div class="dukimg">
        <img src="./images/main.png" alt="ë•ìƒˆ">
    </div>

    <label for="mood">
        ì˜¤ëŠ˜ ê¸°ë¶„ì€?
        <input type="text" id="mood" placeholder="ex: ê¸°ë¶„ì´ ê°€ë¼ì•‰ì•˜ì–´" required/>
    </label>
    <br>

    <label for="weather">
        ë‚ ì”¨ëŠ” ì–´ë•Œ?
        <select id="weather">
        <option>ë§‘ìŒ</option>
        <option>íë¦¼</option>
        <option>ë¹„</option>
        <option>ëˆˆ</option>
        </select>
    </label>
    <br>

    <label for="alone">
        í˜¼ë°¥? ê°™ì´??
        <select id="alone">
        <option>í˜¼ë°¥</option>
        <option>ê°™ì´!</option>
        </select>
    </label>
    <br>

    <label for="type">
        ì›í•˜ëŠ” ìŠ¤íƒ€ì¼ì€?
        <input type="text" id="type" placeholder="ex: ë”°ëœ»í•œ êµ­ë¬¼" required/>
    </label>
    <br>

    <button type="submit">ë©”ë‰´ ì¶”ì²œë°›ê¸°</button>

    <br>
    <div id="result"></div>

    </form>



    <script>
        const form = document.getElementById("menuAI");
        const resultDiv = document.getElementById("result");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const mood = document.getElementById("mood").value;
            const weather = document.getElementById("weather").value; 
            const alone = document.getElementById("alone").value; 
            const type = document.getElementById("type").value; 
            resultDiv.textContent = "ë©”ë‰´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...";

            try {
                const response = await fetch("https://assign2-gold.vercel.app/api/duksungAI", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                },
                body: JSON.stringify({ mood, weather, alone, type }),
        });

        const data = await response.json();

        if (response.ok) {
            resultDiv.textContent = data.answer;
        } else {
            resultDiv.textContent = `ì˜¤ë¥˜: ${data.error}`;
        }
    } catch (err) {
        resultDiv.textContent = "ì„œë²„ì™€ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
        console.error(err);
    }
    });
    </script>
</body>
</html>
